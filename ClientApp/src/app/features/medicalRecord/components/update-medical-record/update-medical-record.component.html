<div class="manage-medical-record-container">
  <h2>Cập nhật Hồ sơ Y tế</h2>
  <div class="loading" *ngIf="isLoading">Đang tải dữ liệu...</div>
  <div class="error-message" *ngIf="errorMessage">{{ errorMessage }}</div>
  <form *ngIf="!isLoading && appointment" (ngSubmit)="onSubmit()" #medicalRecordForm="ngForm">
    <div class="form-group">
      <label>Lịch hẹn</label>
      <input
        type="text"
        [value]="appointment.id + ' - ' + appointment.doctorName + ' (' + (appointment.scheduleTime | date:'dd/MM/yyyy HH:mm') + ')'"
        readonly
      />
    </div>
    <div class="form-group">
      <label for="diagnosis">Chẩn đoán</label>
      <input type="text" id="diagnosis" [(ngModel)]="record.diagnosis" name="diagnosis" required />
    </div>
    <div class="form-group">
      <label for="prescription">Đơn thuốc</label>
      <textarea id="prescription" [(ngModel)]="record.prescription" name="prescription" required></textarea>
    </div>
    <div class="form-group">
      <label for="notes">Ghi chú</label>
      <textarea id="notes" [(ngModel)]="record.notes" name="notes"></textarea>
    </div>
    <button type="submit" [disabled]="medicalRecordForm.invalid || isLoading">Cập nhật Hồ sơ</button>
  </form>
</div>